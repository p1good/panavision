package  {		import flash.net.Socket;	import flash.events.ProgressEvent;	import flash.filesystem.File;	import flash.filesystem.FileMode;	import flash.filesystem.FileStream;	import flash.utils.ByteArray;		public class FileUploader {				private var socket:Socket;		private var fileToUpload:File;		private var fileByte:ByteArray;				 private function writeBytesToFile(fileName:String, data:ByteArray):File {         var outFile:File = File.desktopDirectory; // dest folder is desktop         outFile = outFile.resolvePath(fileName);  // name of file to write         var outStream:FileStream = new FileStream();         // open output file stream in WRITE mode         outStream.open(outFile, FileMode.WRITE);         // write out the file         outStream.writeBytes(data, 0, data.length); 		trace("DATA:"+data.length)        // close it         outStream.close(); 		return outFile;    } 				public function FileUploader(data:ByteArray) {			this.fileToUpload = writeBytesToFile("test.png",data);			//this.fileByte = file; 			uploadFile();		}				private function uploadFile():void {			socket = new Socket("contexise.com", 9021);			socket.addEventListener(ProgressEvent.SOCKET_DATA, socketProgress);		}				private function socketProgress(event:ProgressEvent):void {						var serverResponseFull:String = socket.readUTFBytes(socket.bytesAvailable);			var serverResponse:Number = Number(serverResponseFull.substr(0, 3));						trace("serverResponse: " + serverResponseFull);						if (serverResponse == 220) { //220 DreamHost FTP				socket.writeUTFBytes("USER silverfish\r\n");				socket.flush();			} else if (serverResponse == 331) { //331 Password required for myUsername				socket.writeUTFBytes("PASS silverfish123\r\n");				socket.flush();			} else if (serverResponse == 230) { //230 User myUsername logged in				socket.writeUTFBytes("CWD /data/userPhoto\r\n"); 				socket.flush();			} else if (serverResponse == 250) { //250 CWD command successful				socket.writeUTFBytes("Type I\r\n");				socket.flush();			} else if (serverResponse == 200) { //200 Type set to A				socket.writeUTFBytes("PASV\r\n");				socket.flush();			} else if (serverResponse == 227) { //227 Entering Passive Mode				var fileStream:FileStream = new FileStream();				fileStream.open(fileToUpload, FileMode.READ);				var fileContents:String = fileStream.readUTFBytes(fileStream.bytesAvailable);				trace("LOAD FILE:"+fileContents)				socket.writeUTFBytes("STOR " + fileContents + "\r\n");				//socket.writeBytes(fileByte)				socket.flush();			}					}			}}